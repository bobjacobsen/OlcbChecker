\input{formattingHeader}

\titleandheader{OpenLCB Checking Implementor Questionnaire }

\begin{document}
\maketitle
\thispagestyle{firststyle}

\section{Introduction}

Some information about construction of the node being checked can't readily be obtained
from active checks on the LCC bus. Some information is needed to make those active 
checks effective.  This questionnaire is meant to deal with both of those
by getting specific implementation details from the device implementer.

This questionnaire should be filled out with details from the specific device being checked.
If the device does not implement a protocol, mark that section as ``Not Applicable''.

This is divided into sections corresponding to the specific check plans.

Please feel free to add extra pages as needed.

\section{Device Being Checked Identification}
    \begin{enumerate}
    \item How is this device identified?
        \begin{enumerate}
        \item Manufacturer name?
        \item Model name?
        \item Hardware version?
        \item Software version?
        \end{enumerate}
    \end{enumerate}

\section{Configuration}
    \begin{enumerate}
    \item What does the device being checked need in order to operate properly?
            E.g. power supply (other than through the LCC cable) or other connections?
    \item Are there any optional LCC functions that need to be enabled before checking?
            E.g. an optional fast clock master that needs to be enabled via configuration.
            If so, please provide instructions for doing that configuration.
    \end{enumerate}
    
\section{Unique IDs}
    \begin{enumerate}
        \item What is the Unique ID(s) of the device being checked?
        \item Was the Unique ID(s) assigned from a range under the control of the implementor? 
        \item Does the implementor assign different Unique IDs to individual nodes?
    \end{enumerate}

\section{CAN Physical Layer}
    \begin{enumerate}
        \item Does the device use standard CAN transceiver(s) from recognized vendors?
        \item Does the device use standard CAN controller(s) from recognized vendors?
        \item Are the CAN jacks wired in parallel as required by Standard section 4?
            If the device has more than two LCC jacks, how are they to be used?
        \item Does the device obey the timing constraints listed in the Standard section 5?
        \item Does the device use or provide a DCC signal on the optional conductors?
            \begin{enumerate}
                \item If so, does the item have the correct markings?
            \end{enumerate}
        \item Is the device properly labeled with power sourcing and/or sinking current labels?
            \begin{enumerate}
                \item Are the current values listed on the label(s) correct?
            \end{enumerate}
    \end{enumerate}

\section{CAN Frame Transfer Layer}
    \begin{enumerate}
        \item Is this node's operation compatible with Standard CAN frames
            (i.e. not Extended CAN frames) on the CAN bus?
        \item Does the node transmit extended-format remote frames (frames with RTR set)?
        \item Does the node transmit overload frames?
        \item How does the device signal the detection of a duplicate node ID?
                (See section 6.2.6 of the Standard)
        \item Does the device report changes in the CAN link status? 
                (See section 6.2.7 of the Standard)
        \item Does the device use the recommended algorithm for generating alias values?
            \begin{enumerate}
                \item If not, please describe how the node meets the requirements of the 
                    CAN Frame Level Standard section 6.3.
            \end{enumerate}
    \end{enumerate}

\section{Message Transport Layer}
    \begin{enumerate}
        \item Standard section 3.5.4 requires that ``OpenLCB nodes shall indicate an 
            error when they detect an incoming message with a Source Node ID
            equal to their own''. How does this device do that?
        \item Does the device meet the timing requirements in section 3.7 Delays and Timeouts?
    \end{enumerate}

\section{Supported Protocols}
    Please mark the OpenLCB protocols that the node implements.
    \begin{itemize}
        \item[$\square$] Simple Protocol
        \item[$\square$] Datagram Protocol
        \item[$\square$] Stream Protocol
        \item[$\square$] Memory Configuration Protocol
        \item[$\square$] Event Exchange (Producer/Consumer) Protocol
        \item[$\square$] Abbreviated Default CDI Protocol (ACDI)
        \item[$\square$] Simple Node Information Protocol 
        \item[$\square$] Configuration Description Information (CDI) 
        \item[$\square$] Train Control Protocol 
        \item[$\square$] Function Description Information (FDI) 
        \item[$\square$] Firmware Upgrade Protocol 
    \end{itemize}

\section{Simple Node Information Protocol}
    \subsection{Simple Node Information Protocol Providing Devices}
        \begin{enumerate}
            \item Does the device provide its SNIP information using
                the deprecated multi-message form, or does it use
                the preferred single-message form?
        \end{enumerate}
    \subsection{Simple Node Information Protocol Consumers}
        \begin{enumerate}
            \item Does the device properly decode future versions of the SNIP
                information? (See Section 5.2 of the Standard.)
        \end{enumerate}

\section{Event Transport Protocol}
    \begin{enumerate}
        \item If there are default values configured for Event IDs in the device,
            from what range are those allocated? Is that a range that has been
            allocated to the manufacturer?
        \item  If there are default values configured for Event IDs in the device,
            are those different for every device manufactured? How is uniqueness
            guaranteed?
        \item Does this device produce Events With Payload?  
            \begin{enumerate}
                \item If so, when?
            \end{enumerate}
        \item Does this item consume Events With Payload?
            \begin{enumerate}
                \item If so, when?
            \end{enumerate}
    \end{enumerate}

\section{Datagram Transport Protocol}
    \begin{enumerate}
        \item Does the device receive and process datagrams?
            \begin{enumerate}
                \item If so, please provide the contents of a datagram that
                    will elicit a positive response, and the contents of a 
                    datagram that will elicit a negative response.
            \end{enumerate}
    \end{enumerate}

\section{Memory Configuration Protocol}
    \begin{enumerate}
        \item Does the device implement sections 4.17 and 4.18 of the Standard?
              If not, what does the device do when it receives a Lock/Reserve Command 
              datagram?
    \end{enumerate}

\section{Configuration Definition Information (CDI)}
    \subsection{CDI Providing Devices}
        \begin{enumerate}
            \item Which version of the CDI schema does this node provide?
            \item Does the device have an \xml{ACDI} element in the CDI that it provides?
                If so, does it also provide separate definition elements for the
                values in the ACDI?
        \end{enumerate}
    \subsection{CDI Using Devices}
        \begin{enumerate}
            \item Does the device decode and display all the element types in section 
                    5.1 of the Standard? If not, which does it not display
                    and what does it to with those?
            \item What does the device do with the optional ``hint'' elements?
            \item Does the device properly handle additional, unknown elements? 
                    (See Section 6 of the Standard)
        \end{enumerate}

\section{Firmware Upgrade}
    \begin{enumerate}
        \item Does the device implement the Firmware Upgrade Protocol?
        \item If the device implements that Firmware Upgrade protocol,
                please provide a valid upgrade file that will be used
                during checking.
    \end{enumerate}

\section{Broadcast Time}
    \begin{enumerate}
        \item Does the device use Broadcast Time information?
            \begin{enumerate}
                \item If so, which of the four defined clocks are used?
            \end{enumerate}
        \item Does the device produce Broadcast Time information?
            \begin{enumerate}
                \item If so, which of the four defined clocks are provided?
            \end{enumerate}
        
    \end{enumerate}

\section{Train Control Protocol}
    \begin{enumerate}
        \item Does the device use the Train Control Protocol by acting as a Throttle?
        \item Does the device use the Train Control Protocol by acting as a Train?
        \begin{enumerate}
            \item The Standard section 7.1 says that
                ``A Train Node representing a DCC locomotive ... may, 
                but is not required to provide the last written data upon a read command.''.
                Does this device provide the data in that case?
        \end{enumerate}
    \end{enumerate}

\section{Train Search Protocol}
    \begin{enumerate}
        \item Does this device participate in the Train Search Protocol
            by making search requests?
        \item Does this device participate in the Train Search Protocol
            by replying to search requests?
    \end{enumerate}

\section{Function Definition Information (FDI)}
    \begin{enumerate}
        \item Does the device read FDI from other nodes?
        \item Does the device provide FDI to be read by other nodes?
        \begin{enumerate}
            \item Which version of the FDI schema does this node provide?
            \item Does the FDI information from this device use the 
                deprecated ``space'' and ``origin'' attributes?
        \end{enumerate}
    \end{enumerate}

\section{Other Interactions}
    \begin{enumerate}
        \item Does the device use any protocols in addition to the current
            OpenLCB Standards?  For example, something documented in a Working Note.
    \end{enumerate}


\end{document}  
